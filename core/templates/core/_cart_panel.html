{# templates/core/_cart_panel.html #}
<style>
  .pc-cart-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:.5rem; }
  .pc-cart-title  { margin:0; font-weight:800; color:var(--pc-fg); }
  .pc-cart-empty  { color:var(--pc-fg-dim); margin:0; }
  .pc-cart-list   { display:flex; flex-direction:column; gap:.6rem; margin: .5rem 0 1rem; }
  .pc-cart-item   { background:var(--pc-card); border:1px solid var(--pc-border); border-radius:12px; padding:.6rem .7rem; display:grid; grid-template-columns:1fr auto; gap:.5rem; }
  .pc-ci-name     { color:var(--pc-fg); font-weight:700; margin:0; }
  .pc-ci-sku      { color:var(--pc-fg-dim); font-size:.8rem; }
  .pc-ci-right    { text-align:right; display:flex; flex-direction:column; gap:.25rem; }
  .pc-ci-qty      { display:flex; align-items:center; justify-content:flex-end; gap:.35rem; }
  .pc-btn-sm      { border-radius:8px; border:1px solid var(--pc-border); background:var(--pc-bg-acc); color:var(--pc-fg); padding:.2rem .5rem; cursor:pointer; }
  .pc-btn-del     { border-radius:8px; border:1px solid var(--pc-border); background:#2a1416; color:#ff7a82; padding:.25rem .5rem; cursor:pointer; }
  .pc-total       { display:flex; align-items:center; justify-content:space-between; font-weight:800; color:var(--pc-fg); margin:.6rem 0 1rem; }
  .pc-actions     { display:flex; gap:.5rem; }
  .pc-btn         { border-radius:12px; padding:.6rem .9rem; border:none; cursor:pointer; font-weight:700; }
  .pc-btn-warn    { background:#2a1416; color:#ff9aa3; border:1px solid #3a1d21; }
  .pc-btn-ok      { background:var(--pc-accent); color:#0b1220; }
</style>

<div id="cart-panel" class="pc-cart">
  <div class="pc-cart-header">
    <h3 class="pc-cart-title">Carrito</h3>
    <button
      class="pc-btn-sm"
      hx-get="{% url 'cart_partial' %}"
      hx-swap="outerHTML"
      hx-target="#cart-panel"
      title="Refrescar"
    >⟳</button>
  </div>

  {% if items %}
    <div class="pc-cart-list">
      {% for it in items %}
        <div class="pc-cart-item">
          <div>
            <p class="pc-ci-name">{{ it.nombre }}</p>
            <div class="pc-ci-sku">SKU: {{ it.sku }} • $ {{ it.precio|floatformat:0 }}</div>
          </div>
          <div class="pc-ci-right">
            <div class="pc-ci-qty">
              <button class="pc-btn-sm"
                      hx-get="{% url 'cart_dec' it.id %}"
                      hx-target="#cart-panel"
                      hx-swap="outerHTML">−</button>
              <div>x{{ it.qty }}</div>
              <button class="pc-btn-sm"
                      hx-get="{% url 'cart_add' it.id %}"
                      hx-target="#cart-panel"
                      hx-swap="outerHTML">＋</button>
            </div>
            <div>Subt: $ {{ it.subtotal|floatformat:0 }}</div>
            <div>
              <button class="pc-btn-del"
                      hx-get="{% url 'cart_remove' it.id %}"
                      hx-target="#cart-panel"
                      hx-swap="outerHTML">Quitar</button>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="pc-total">
      <div>Total</div>
      <div>$ {{ total|floatformat:0 }}</div>
    </div>

    <div class="pc-actions">
      <button class="pc-btn pc-btn-warn"
              hx-get="{% url 'cart_empty' %}"
              hx-target="#cart-panel"
              hx-swap="outerHTML">Vaciar</button>

      <a class="pc-btn pc-btn-ok" href="{% url 'ventas_confirmar' %}">
        Confirmar venta
      </a>
    </div>

  {% else %}
    <p class="pc-cart-empty">Tu carrito está vacío.</p>
  {% endif %}
</div>
